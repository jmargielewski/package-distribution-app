(window["webpackJsonppackage-distribution-app"]=window["webpackJsonppackage-distribution-app"]||[]).push([[0],{245:function(e,a,t){e.exports=t(433)},431:function(e,a,t){},433:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(29),o=t(108),l=t(36),i=t(218),s=t(16);function u(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?u(t,!0).forEach((function(a){Object(s.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var d={allIds:[],byId:null,isLoading:!1,errors:[]},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"FETCH_TEAMS_REQUEST":return m({},e,{isLoading:!0});case"FETCH_TEAMS_SUCCESS":return m({},e,{allIds:a.payload.allIds,byId:a.payload.byId,isLoading:!1});case"FETCH_TEAMS_FAILURE":return m({},e,{errors:e.errors.concat({message:"Teams Failure ".concat(a.payload)}),isLoading:!1});default:return e}};function f(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function E(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?f(t,!0).forEach((function(a){Object(s.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var g={allIds:[],byId:null,isLoading:!1,errors:[]},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"FETCH_PACKAGES_REQUEST":return E({},e,{isLoading:!0});case"FETCH_PACKAGES_SUCCESS":return E({},e,{allIds:a.payload.allIds,byId:a.payload.byId,isLoading:!1});case"FETCH_PACKAGES_FAILURE":return E({},e,{errors:e.errors.concat({message:"Packages Failure ".concat(a.payload)}),isLoading:!1});default:return e}};function y(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function b(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?y(t,!0).forEach((function(a){Object(s.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var h={allIds:[],byId:null,isLoading:!1,errors:[]},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"FETCH_TEAM_PACKAGES_REQUEST":return b({},e,{isLoading:!0});case"FETCH_TEAM_PACKAGES_SUCCESS":return b({},e,{allIds:a.payload.allIds,byId:a.payload.byId,isLoading:!1});case"FETCH_TEAM_PACKAGES_FAILURE":return b({},e,{errors:e.errors.concat({message:"Team Packages Failure ".concat(a.payload)}),isLoading:!1});case"ADD_PACKAGE_TO_TEAM":return b({},e,{allIds:e.allIds.concat(a.payload.teamPackageId),byId:b({},e.byId,Object(s.a)({},a.payload.teamPackageId,a.payload))});case"CANCEL_TEAM_PACKAGE":return b({},e,{byId:b({},e.byId,Object(s.a)({},a.payload.teamPackageId,b({},e.byId[a.payload.teamPackageId],{endDate:a.payload.endDate})))});default:return e}},k=Object(l.c)({teams:p,packages:P,teamPackages:v}),O=function(){var e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d;return Object(l.e)(k,e(Object(l.a)(i.a)))}(),C=t(51),T=t(52),I=t(53),A=t(56),_=t(61),S=t(25),j=t.n(S),w=t(442),D=t(447),M=t(63),F=t(438),H=t(445),L=t(32),G=t.n(L),U=t(57),K=t(58),R=t.n(K),x=t(219),Y=t.n(x);function N(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function Q(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?N(t,!0).forEach((function(a){Object(s.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var B=function(e){var a=[],t={};return e.forEach((function(e){var n=e.teamId;t[n]=Q({},e),a.push(n)})),{byId:t,allIds:a}},J=function(e){var a=[],t={};return e.forEach((function(e){var n=e.packageId;t[n]=Q({},e),a.push(n)})),{byId:t,allIds:a}},W=function(e){var a=[],t={};return e.forEach((function(e){var n=e.teamPackageId;t[n]=Q({},e),a.push(n)})),{byId:t,allIds:a}},X=function(e){return{type:"FETCH_TEAM_PACKAGES_SUCCESS",payload:W(e)}},z=function(e){return{type:"FETCH_TEAMS_SUCCESS",payload:B(e)}},V=function(e){return{type:"FETCH_PACKAGES_SUCCESS",payload:J(e)}},$=function(e){return function(e){return e.teams.allIds}(e).map((function(a){return function(e,a){return e.teams.byId[a]}(e,a)}))},q=function(e){return function(e){return e.packages.allIds}(e).map((function(a){return function(e,a){return e.packages.byId[a]}(e,a)}))},Z=function(e){return function(e){return e.teamPackages.allIds}(e).map((function(a){return function(e,a){return e.teamPackages.byId[a]}(e,a)}))},ee=function(e){var a=e.team,t=e.activeTeam,n=e.handleActiveTeam,c=e.renderTeamPackages;return r.a.createElement(H.a,{link:!0,onClick:function(){return n(a)},className:t&&t.teamId===a.teamId?"team--active":""},r.a.createElement(H.a.Content,null,r.a.createElement(H.a.Header,null,a.team_name,t&&t.teamId===a.teamId&&r.a.createElement(M.a,{style:{float:"right"},size:"large",name:"check circle outline",color:"blue"})),r.a.createElement(F.a,null),r.a.createElement(H.a.Group,{itemsPerRow:2,centered:!0},c(a.teamId))))},ae=t(443),te=t(446),ne=function(e){return e>1||0===e?"s":""},re=new Intl.NumberFormat("en-US",{style:"currency",currency:"GBP",minimumFractionDigits:2}),ce=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return j()(a).add(e,"months").startOf("month").format("YYYY-MM-DD")},oe=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return j()(a).add(e,"months").endOf("month").subtract(1,"months").format("YYYY-MM-DD")},le=function(e){var a=e.modal,t=e.closeModal,n=e.selectedPackage,c=e.activeTeam,o=e.addPackageToTeam;return r.a.createElement(ae.a,{basic:!0,open:a,onClose:t},r.a.createElement(ae.a.Header,null,"Add-",n.name,"-Package to the",c.team_name,"-team"),r.a.createElement(ae.a.Content,null,r.a.createElement(ae.a.Description,null,r.a.createElement("p",null,"Price for this month: ".concat(function(e){var a=e/j()().daysInMonth(),t=j()().endOf("month").diff(j()(),"days");return re.format(a*t)}(n.price))),r.a.createElement("p",null,"Price for the next month: ".concat(re.format(n.price))),r.a.createElement("p",null,"Commitment period: ".concat(n.commitmentPeriod," month").concat(ne(n.commitmentPeriod))),r.a.createElement("p",null,"Cancellation available from: ".concat(ce(n.commitmentPeriod))),r.a.createElement("p",null,"Days: ".concat(n.days)),r.a.createElement("p",null,"Credits: ".concat(n.mrCredits)))),r.a.createElement(ae.a.Actions,null,r.a.createElement(te.a,{color:"green",inverted:!0,onClick:function(){t(),o(n,c.teamId)}},r.a.createElement(M.a,{name:"check"}),"Confirm"),r.a.createElement(te.a,{color:"red",inverted:!0,onClick:t},r.a.createElement(M.a,{name:"remove"}),"Cancel")))},ie=t(448),se=t(441),ue=function(){return r.a.createElement(ie.a,{active:!0,inverted:!0},r.a.createElement(se.a,null))},me=t(444),de=function(e){var a=e._package,t=e.activeTeam,n=e.handleSelectPackage,c=e.isPackageAvailabe,o=r.a.createElement("span",null,r.a.createElement(te.a,{attached:"bottom",color:"green",disabled:!t||c(a),onClick:function(){return n(a)}},"Buy The Package"));return r.a.createElement(H.a,{link:!0},r.a.createElement(H.a.Content,null,r.a.createElement(H.a.Header,null,a.name),r.a.createElement(H.a.Description,null,a.description)),r.a.createElement(H.a.Content,null,r.a.createElement(H.a.Meta,null,"Concellation Period:",a.concellationPeriod,"month",ne(a.concellationPeriod)),r.a.createElement(H.a.Meta,null,"Commitment Period:",a.commitmentPeriod,"month",ne(a.commitmentPeriod)),r.a.createElement(H.a.Meta,null,"Price:",re.format(a.price)),r.a.createElement(H.a.Meta,null,"Credits:",a.mrCredits),r.a.createElement(H.a.Meta,null,"Days:",a.days)),r.a.createElement(me.a,{content:"Please choose a team first.",disabled:!!t,on:"hover",trigger:o}))},pe=function(e){var a=e.activePackage,t=e.startDate,n=e.endDate,c=e.teamPackageId,o=e.isCancellationAvailable,l=e.cancellationDate,i=e.handleCancelPackage;return r.a.createElement(H.a,null,r.a.createElement(H.a.Content,null,r.a.createElement(H.a.Header,{className:"team__header"},a.name)),r.a.createElement(H.a.Content,{className:"team__meta"},r.a.createElement(H.a.Meta,null,"Start date:",t),n&&r.a.createElement(H.a.Meta,null,"End date:",n),r.a.createElement(H.a.Meta,null,"Commitment period:",a.commitmentPeriod,"month",ne(a.commitmentPeriod)),r.a.createElement(H.a.Meta,null,"Cancellation period:",a.concellationPeriod,"month",ne(a.commitmentPeriod)),r.a.createElement(H.a.Meta,null,"Cancellation available from:",l)),!n&&r.a.createElement(te.a,{color:"red",disabled:!o,className:"team__button",onClick:function(){return i(c,a.concellationPeriod)}},"Cancel Package"))},fe=(t(431),t(432),function(e){function a(){var e,t;Object(C.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(t=Object(I.a)(this,(e=Object(A.a)(a)).call.apply(e,[this].concat(c)))).state={activeTeam:null,selectedPackage:null,modal:!1},t.getData=function(){t.props.fetchTeams(),t.props.fetchPackages(),t.props.fetchTeamPackages()},t.closeModal=function(){return t.setState({modal:!1,selectedPackage:null})},t.handleActiveTeam=function(e){return t.setState({activeTeam:e})},t.handleSelectPackage=function(e){t.setState({modal:!0,selectedPackage:e})},t.handleCancelPackage=function(e,a){var n=oe(a);t.props.cancelTeamPackage(e,n)},t.isPackageAvailabe=function(e){var a=t.props.teamPackages,n=e.packageId,r=e.sellLimit;return!!r&&!a.reduce((function(e,a){return a.packageId===n&&(e-=1),e}),r)},t.renderTeams=function(e){return e.length>0?e.map((function(e){return r.a.createElement(ee,{key:e.teamId,team:e,activeTeam:t.state.activeTeam,handleActiveTeam:t.handleActiveTeam,renderTeamPackages:t.renderTeamPackages})})):r.a.createElement(ue,null)},t.renderPackages=function(e){return e.length>0?e.map((function(e){return r.a.createElement(de,{key:e.packageId,_package:e,activeTeam:t.state.activeTeam,isPackageAvailabe:t.isPackageAvailabe,handleSelectPackage:t.handleSelectPackage})})):r.a.createElement(ue,null)},t.renderTeamPackages=function(e){var a=t.props,n=a.teamPackages,c=a.packages;if(n.length>0&&c.length>0){var o=n.filter((function(a){return a.teamId===e}));return c.filter((function(e){var a=e.packageId;return-1!==o.map((function(e){return e.packageId})).indexOf(a)})).map((function(e,a){var n=ce(e.commitmentPeriod,o[a].startDate),c=j()().isAfter(Date.parse(n));return r.a.createElement(pe,{key:e.packageId,startDate:o[a].startDate,endDate:o[a].endDate,teamPackageId:o[a].teamPackageId,activePackage:e,cancellationDate:n,handleCancelPackage:t.handleCancelPackage,isCancellationAvailable:c})}))}return r.a.createElement(ue,null)},t}return Object(_.a)(a,e),Object(T.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.props,a=e.teams,t=e.packages,n=e.addPackageToTeam,c=this.state,o=c.modal,l=c.activeTeam,i=c.selectedPackage;return r.a.createElement(w.a,null,r.a.createElement(D.a,{as:"h2"},r.a.createElement(M.a,{name:"users"}),"TEAMS"),r.a.createElement(F.a,null),r.a.createElement(H.a.Group,{itemsPerRow:3,centered:!0},this.renderTeams(a)),r.a.createElement(D.a,{as:"h2"},r.a.createElement(M.a,{name:"cube"}),"PACKAGES"),r.a.createElement(F.a,null),r.a.createElement(H.a.Group,{itemsPerRow:4,centered:!0},this.renderPackages(t)),o&&r.a.createElement(le,{modal:o,closeModal:this.closeModal,selectedPackage:i,activeTeam:l,addPackageToTeam:n}))}}]),a}(n.Component)),Ee=Object(o.b)((function(e){return{teams:$(e),packages:q(e),teamPackages:Z(e)}}),{fetchTeams:function(){return function(){var e=Object(U.a)(G.a.mark((function e(a){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"FETCH_TEAMS_REQUEST"}),e.prev=1,e.next=4,R.a.get("https://api.npoint.io/95ab3d0438d80733b06b/teams");case 4:200===(t=e.sent).status?a(z(t.data)):console.error("status: ".concat(t.status)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a({type:"FETCH_TEAMS_FAILURE",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}()},fetchPackages:function(){return function(){var e=Object(U.a)(G.a.mark((function e(a){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"FETCH_PACKAGES_REQUEST"}),e.prev=1,e.next=4,R.a.get("https://api.npoint.io/95ab3d0438d80733b06b/packages");case 4:200===(t=e.sent).status?a(V(t.data)):console.error("status: ".concat(t.status)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("response",e.t0),a({type:"FETCH_PACKAGES_FAILURE",payload:e.t0});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}()},fetchTeamPackages:function(){return function(){var e=Object(U.a)(G.a.mark((function e(a){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"FETCH_TEAM_PACKAGES_REQUEST"}),e.prev=1,e.next=4,R.a.get("https://api.npoint.io/95ab3d0438d80733b06b/teamPackages");case 4:200===(t=e.sent).status?a(X(t.data)):console.error("status: ".concat(t.status)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a({type:"FETCH_TEAM_PACKAGES_FAILURE",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}()},addPackageToTeam:function(e,a){return{type:"ADD_PACKAGE_TO_TEAM",payload:{teamPackageId:Y.a.generate(),packageId:e.packageId,teamId:a,startDate:j()().format("YYYY-MM-DD"),endDate:null}}},cancelTeamPackage:function(e,a){return{type:"CANCEL_TEAM_PACKAGE",payload:{teamPackageId:e,endDate:a}}}})(fe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(c.render)(r.a.createElement((function(e){var a=e.children;return r.a.createElement(o.a,{store:O},a)}),null,r.a.createElement(Ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[245,1,2]]]);
//# sourceMappingURL=main.b07d1603.chunk.js.map